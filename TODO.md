# Genie Studio - TODO & Future Enhancements

This document outlines planned features, improvements, and bug fixes for Genie Studio. Items are roughly categorized but may overlap.

## Core Features & AI Interaction

1.  **Integrated Code Editor:** Embed a proper code editor component (e.g., Monaco via `streamlit-monaco` or similar) for viewing and potentially editing context files or AI-generated code snippets.
2.  **AI Code Generation -> Diff View:** Detect code blocks (especially file modifications) in the AI's response markdown.
3.  **Diff View Presentation:** Display detected code changes as a side-by-side or inline diff within the embedded editor or a dedicated diff viewer component.
4.  **Per-Change Acceptance UI:** For responses containing multiple code changes/blocks, provide UI elements (e.g., buttons next to each diff hunk or block) to accept or reject individual changes before applying them or generating the next prompt.
5.  **Multi-Change Navigation:** If multiple diffs/changes are presented, add UI (e.g., "Next Change", "Previous Change" buttons) to easily navigate between them.
6.  **Code Processing Pipeline:** Allow defining Python functions (potentially configured via UI or config file) that automatically process code found in the AI's response *before* it's displayed or used for diffing (e.g., running linters, formatters, or custom validation).
7.  **Session/Context Size Management:**
    *   Provide clearer visual warnings when context approaches model limits.
    *   Offer automatic summarization strategies (e.g., summarize oldest N messages) when context limit is exceeded.
8.  **Multi-Modal Support:** Allow image input (upload or URL) to be included in prompts for models that support it (e.g., Gemini Pro Vision). Requires UI and API client updates.
9.  **Alternative LLM Providers:** Abstract the API client to potentially support other providers like OpenAI (GPT-*) or Anthropic (Claude) with appropriate API key handling and model selection.
10. **"Fork" Conversation:** Add an option to duplicate a conversation starting from a specific message, allowing exploration of alternative paths.
11. **Streaming Responses:** Implement streaming API responses to display text incrementally as it's generated by the model, improving perceived responsiveness.

## UI/UX Improvements

12. **Resizable Layout:** Allow resizing the sidebar, main chat area, and parameter column using draggable dividers.
13. **Configurable Themes:** Simple toggle between default Streamlit light/dark themes, potentially storing preference in DB/local storage.
14. **"Copy Code" Button:** Add a button to easily copy the content of code blocks within chat messages.
15. **Keyboard Shortcuts:** Implement shortcuts for common actions (e.g., `Ctrl+Enter` to submit prompt, `Ctrl+N` for new chat).
16. **Conversation Search/Filter:** Add a search bar to filter the conversation history list in the sidebar.
17. **Pin Conversations:** Allow pinning important conversations to the top of the history list.
18. **Improved Loading/Busy Indicators:** More specific indicators for actions like context scanning, token counting, and API calls.
19. **Context Path Drag-and-Drop:** (Requires Custom Component) Allow dragging folders/files onto a target area in the sidebar to add them to the context paths.
20. **Parameter Section Collapsing:** Allow collapsing sections within the right-hand parameter column (e.g., hide Grounding if not used).

## Backend & Configuration

21. **Centralized Configuration File:** Move settings like `ALLOWED_EXTENSIONS`, `EXCLUDE_DIRS`, `MAX_FILE_SIZE_MB`, default model, logging level, etc., from code constants to a configuration file (e.g., `config.yaml` or `.env`).
22. **Asynchronous Operations:** Refactor potentially long-running operations like context file scanning (`build_context_from_added_paths`) and API calls (`generate_text`) to be asynchronous to prevent blocking the UI thread.
23. **Database Migrations:** Implement a schema migration tool (e.g., Alembic) to handle database changes between versions more robustly than simple `ALTER TABLE` attempts.
24. **API Cost Tracking:** (Experimental) If possible via API metadata, provide an estimated token usage/cost display per session or conversation.

## Testing & Quality

25. **End-to-End UI Testing:** Implement automated UI tests using frameworks like Playwright or Selenium to verify key user flows.
26. **Expanded Unit Tests:** Increase unit test coverage for logic components (`actions.py`, `context_manager.py`, `api_client.py`) and potentially UI rendering functions.
27. **Performance Benchmarking:** Establish benchmarks for context scanning and API response times to track regressions.